{"filter":false,"title":"game.js","tooltip":"/game.js","undoManager":{"mark":26,"position":26,"stack":[[{"start":{"row":0,"column":0},"end":{"row":144,"column":1},"action":"insert","lines":["let game;","let platforms;  // a group of platform objects the player will jump on","let player; // the actual player controlled sprite","let cursors;","let platformCount = 0;","let emitter;","let particles;","let gameOptions = {","  width: 480,","  height: 640,","  gravity: 800","}","","class JumpScene extends Phaser.Scene {","  constructor() {","    super({ key: 'JumpScene' })","  }","","  preload(){","    this.load.image('platform', 'https://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/platform.png');","    this.load.image('stripe', 'https://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/stripe.png');","    this.load.spritesheet(\"codey\", \"https://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/codey.png\", {","      frameWidth: 72,","      frameHeight: 90","    });","  }","","  create() {","    const graphics = this.add.graphics();","    graphics.fillGradientStyle(0xdadaff, 0x6cfafa, 0xfccaff, 0xdadaff, 1);","    graphics.fillRect(0, 0, gameOptions.width, gameOptions.height);","    this.physics.world.setBounds(0, 0, 480, 640);","    platforms = this.physics.add.group({","      allowGravity: false,","      immovable: true,","    });","","    for (let i = 0; i < 8; i++) {","      let randomX = Math.floor(Math.random() * 400) + 24;","      platforms.create(randomX, i * 80, 'platform').setScale(.5);","    }","","    player = this.physics.add.sprite(100, 450, 'codey').setScale(.5);","    player.setBounce(1);","    player.setCollideWorldBounds(true);","    player.body.checkCollision.up = false;","    player.body.checkCollision.left = false;","    player.body.checkCollision.right = false;","","    //In order for our platforms to interact with the player we add a collider  ","    this.physics.add.collider(player, platforms);","","    cursors = this.input.keyboard.createCursorKeys();","    this.anims.create({","      key: 'jump',","      frames: this.anims.generateFrameNumbers('codey', { start: 2, end: 3}),","      frameRate: 10,","      repeat: -1,","    });","particles = this.add.particles('stripe');","  }","","  update(){","    if (player.body.touching.down) {","        this.cameras.main.shake(100, .004);","        }","    if (cursors.left.isDown)","    {","      player.setVelocityX(-240); // we want to apply a negative x velocity to go left on the screen","    }","    else if (cursors.right.isDown)","    {","      player.setVelocityX(240); // we want to apply a positive x velocity to go right on the screen","    }","    else","    {   ","      //if we don't include this then the player will always be going right or left instead of a L/R neutral upwards direction","      player.setVelocityX(0);","    }","","    if (player.body.touching.down) {","      player.setVelocityY(-500);","    }","","","    // We want to the platforms to move downwards and create an effect of progressing upwards","    // This can be done by moving the camera but can also be done by moving the world around the player","    if (player.body.y <  gameOptions.height/2) {","      platforms.children.iterate(updateY, this);","    }","\t\tif (platformCount > 10 && !emitter) {","        emitter = particles.createEmitter({                                                                                   ","  x: { min: 0, max: gameOptions.width },                                                                              ","  y: gameOptions.height + 10,                                                                                         ","  lifespan: 2500,                                                                                                     ","  speedY: { min: -300, max: -500 },                                                                                   ","  scale: .5,                                                                                                          ","  quantity: 5,                                                                                                        ","  blendMode: 'ADD'                                                                                                    ","}); ","        } ","    ","  ","    player.anims.play('jump', true);","    ","    if (cursors.left.isDown) {","        player.flipX === true;","        } else if (cursors.right.isDown) {","          player.flipX === false;","        }","  }","}","","let config = {","  type: Phaser.AUTO,","  width: gameOptions.width,","  height: gameOptions.height,","  backgroundColor: '#4599ff',","  physics: {","    default: 'arcade',","    arcade: {","      gravity: { y: gameOptions.gravity },","    }","  },","  scene: JumpScene,","};","","game = new Phaser.Game(config);","","","// With this function, we move the platforms lower until they're off screen and then we reposition","// them above the screen to create an endless effect.","function updateY(platform){","  let delta = Math.floor(gameOptions.height/2) - player.y;  // we want to keep the player somewhere in the center of the screen so we'll measure the difference from the center y","","  if(delta > 0){ ","    platform.y += delta/30; //the delta may be too large so I'll make it smaller by dividing it by 30","  }","","  if(platform.y > 640){","    platform.y = -platform.height;","    platform.x = Math.floor(Math.random() * 400) + 24;","    platformCount += 1;","  }","}"],"id":1}],[{"start":{"row":19,"column":34},"end":{"row":19,"column":121},"action":"remove","lines":["ttps://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/platform.png"],"id":2},{"start":{"row":19,"column":33},"end":{"row":19,"column":34},"action":"remove","lines":["h"]}],[{"start":{"row":20,"column":31},"end":{"row":20,"column":117},"action":"remove","lines":["https://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/stripe.png"],"id":3}],[{"start":{"row":21,"column":36},"end":{"row":21,"column":121},"action":"remove","lines":["https://s3.amazonaws.com/codecademy-content/courses/learn-phaser/Codey+Jump/codey.png"],"id":4}],[{"start":{"row":21,"column":27},"end":{"row":21,"column":32},"action":"remove","lines":["codey"],"id":5},{"start":{"row":21,"column":27},"end":{"row":21,"column":33},"action":"insert","lines":["player"]},{"start":{"row":42,"column":48},"end":{"row":42,"column":53},"action":"remove","lines":["codey"]},{"start":{"row":42,"column":48},"end":{"row":42,"column":54},"action":"insert","lines":["player"]},{"start":{"row":55,"column":47},"end":{"row":55,"column":52},"action":"remove","lines":["codey"]},{"start":{"row":55,"column":47},"end":{"row":55,"column":53},"action":"insert","lines":["player"]}],[{"start":{"row":49,"column":0},"end":{"row":49,"column":78},"action":"remove","lines":["    //In order for our platforms to interact with the player we add a collider"],"id":6}],[{"start":{"row":2,"column":12},"end":{"row":2,"column":50},"action":"remove","lines":["// the actual player controlled sprite"],"id":7}],[{"start":{"row":1,"column":16},"end":{"row":1,"column":70},"action":"remove","lines":["// a group of platform objects the player will jump on"],"id":8}],[{"start":{"row":68,"column":34},"end":{"row":68,"column":99},"action":"remove","lines":["/ we want to apply a negative x velocity to go left on the screen"],"id":9}],[{"start":{"row":72,"column":33},"end":{"row":72,"column":99},"action":"remove","lines":["/ we want to apply a positive x velocity to go right on the screen"],"id":10}],[{"start":{"row":76,"column":6},"end":{"row":76,"column":126},"action":"remove","lines":["//if we don't include this then the player will always be going right or left instead of a L/R neutral upwards direction"],"id":11},{"start":{"row":76,"column":5},"end":{"row":76,"column":6},"action":"remove","lines":[" "]},{"start":{"row":76,"column":4},"end":{"row":76,"column":5},"action":"remove","lines":[" "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":4},"action":"remove","lines":["    "]},{"start":{"row":75,"column":8},"end":{"row":76,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":83,"column":0},"end":{"row":85,"column":103},"action":"remove","lines":["","    // We want to the platforms to move downwards and create an effect of progressing upwards","    // This can be done by moving the camera but can also be done by moving the world around the player"],"id":12}],[{"start":{"row":126,"column":0},"end":{"row":128,"column":53},"action":"remove","lines":["","// With this function, we move the platforms lower until they're off screen and then we reposition","// them above the screen to create an endless effect."],"id":13}],[{"start":{"row":128,"column":60},"end":{"row":128,"column":177},"action":"remove","lines":["// we want to keep the player somewhere in the center of the screen so we'll measure the difference from the center y"],"id":14},{"start":{"row":128,"column":59},"end":{"row":128,"column":60},"action":"remove","lines":[" "]}],[{"start":{"row":131,"column":28},"end":{"row":131,"column":101},"action":"remove","lines":["//the delta may be too large so I'll make it smaller by dividing it by 30"],"id":15}],[{"start":{"row":68,"column":33},"end":{"row":68,"column":34},"action":"remove","lines":["/"],"id":16}],[{"start":{"row":72,"column":32},"end":{"row":72,"column":33},"action":"remove","lines":["/"],"id":17}],[{"start":{"row":18,"column":2},"end":{"row":18,"column":3},"action":"insert","lines":["f"],"id":18},{"start":{"row":18,"column":3},"end":{"row":18,"column":4},"action":"insert","lines":["u"]},{"start":{"row":18,"column":4},"end":{"row":18,"column":5},"action":"insert","lines":["n"]},{"start":{"row":18,"column":5},"end":{"row":18,"column":6},"action":"insert","lines":["c"]},{"start":{"row":18,"column":6},"end":{"row":18,"column":7},"action":"insert","lines":["t"]},{"start":{"row":18,"column":7},"end":{"row":18,"column":8},"action":"insert","lines":["i"]},{"start":{"row":18,"column":8},"end":{"row":18,"column":9},"action":"insert","lines":["o"]},{"start":{"row":18,"column":9},"end":{"row":18,"column":10},"action":"insert","lines":["n"]}],[{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"insert","lines":[" "],"id":19}],[{"start":{"row":27,"column":2},"end":{"row":27,"column":3},"action":"insert","lines":["f"],"id":20},{"start":{"row":27,"column":3},"end":{"row":27,"column":4},"action":"insert","lines":["u"]},{"start":{"row":27,"column":4},"end":{"row":27,"column":5},"action":"insert","lines":["n"]},{"start":{"row":27,"column":5},"end":{"row":27,"column":6},"action":"insert","lines":["c"]},{"start":{"row":27,"column":6},"end":{"row":27,"column":7},"action":"insert","lines":["t"]},{"start":{"row":27,"column":7},"end":{"row":27,"column":8},"action":"insert","lines":["i"]},{"start":{"row":27,"column":8},"end":{"row":27,"column":9},"action":"insert","lines":["o"]},{"start":{"row":27,"column":9},"end":{"row":27,"column":10},"action":"insert","lines":["n"]}],[{"start":{"row":27,"column":10},"end":{"row":27,"column":11},"action":"insert","lines":[" "],"id":21}],[{"start":{"row":18,"column":20},"end":{"row":18,"column":21},"action":"insert","lines":[" "],"id":22}],[{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"remove","lines":[" "],"id":23},{"start":{"row":18,"column":9},"end":{"row":18,"column":10},"action":"remove","lines":["n"]},{"start":{"row":18,"column":8},"end":{"row":18,"column":9},"action":"remove","lines":["o"]},{"start":{"row":18,"column":7},"end":{"row":18,"column":8},"action":"remove","lines":["i"]},{"start":{"row":18,"column":6},"end":{"row":18,"column":7},"action":"remove","lines":["t"]},{"start":{"row":18,"column":5},"end":{"row":18,"column":6},"action":"remove","lines":["c"]},{"start":{"row":18,"column":4},"end":{"row":18,"column":5},"action":"remove","lines":["n"]},{"start":{"row":18,"column":3},"end":{"row":18,"column":4},"action":"remove","lines":["u"]},{"start":{"row":18,"column":2},"end":{"row":18,"column":3},"action":"remove","lines":["f"]}],[{"start":{"row":27,"column":10},"end":{"row":27,"column":11},"action":"remove","lines":[" "],"id":24},{"start":{"row":27,"column":9},"end":{"row":27,"column":10},"action":"remove","lines":["n"]},{"start":{"row":27,"column":8},"end":{"row":27,"column":9},"action":"remove","lines":["o"]},{"start":{"row":27,"column":7},"end":{"row":27,"column":8},"action":"remove","lines":["i"]},{"start":{"row":27,"column":6},"end":{"row":27,"column":7},"action":"remove","lines":["t"]},{"start":{"row":27,"column":5},"end":{"row":27,"column":6},"action":"remove","lines":["c"]},{"start":{"row":27,"column":4},"end":{"row":27,"column":5},"action":"remove","lines":["n"]},{"start":{"row":27,"column":3},"end":{"row":27,"column":4},"action":"remove","lines":["u"]},{"start":{"row":27,"column":2},"end":{"row":27,"column":3},"action":"remove","lines":["f"]}],[{"start":{"row":121,"column":9},"end":{"row":121,"column":10},"action":"insert","lines":["["],"id":55}],[{"start":{"row":121,"column":19},"end":{"row":121,"column":20},"action":"insert","lines":["]"],"id":56}],[{"start":{"row":121,"column":20},"end":{"row":121,"column":21},"action":"remove","lines":[","],"id":57}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":121,"column":20},"end":{"row":121,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1560368149482,"hash":"dc2d1cdb0e5b2a3e2ab7eec577606a29a694d5ae"}